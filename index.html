<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>PRUpass</title>
    <link rel="stylesheet" href="main.css">
  </head>
<body>
  <script type="text/javascript" src="main.js?v1"></script>
    <script>
        let obj = parseUrlParam()

        console.log(obj)
        const card = `BEGIN:VCARD
VERSION:3.0
FN;CHARSET=UTF-8:${obj.fullname}
N;CHARSET=UTF-8:${obj.fullname};;;;
EMAIL;CHARSET=UTF-8;type=WORK,INTERNET:${obj.email}
TEL;TYPE=CELL:${obj.mobile}
TITLE;CHARSET=UTF-8:${obj.title}
ORG;CHARSET=UTF-8:Prudential Vietnam
URL;type=WORK;CHARSET=UTF-8:${obj.social}
REV:2022-07-26T13:22:25.100Z
END:VCARD`;
    </script>
    <h1>&nbsp;</h1>
    <div class="card">
    <div style="background-color: #e72230;width:100%; height: 100%;"><img src="logo.png" alt="Avatar" style="height: 180px;"></div>
      
      <div class="container">
        <h1><strong id=fullname></strong></h1>
        <h3 id=title style="color: darkgray;"></h3> 
        <h3 id=email style="color: darkgray;"></h3> 
        <h3 id=mobile style="color: darkgray;"></h3> 
        <h3 id=social style="color: darkgray;"></h3> 
      </div>
    </div>
    <script>
      document.getElementById("fullname").innerHTML = obj.fullname
      document.getElementById("mobile").innerHTML = "Mobile: " + obj.mobile
      document.getElementById("email").innerHTML = "Email: " + obj.email
      document.getElementById("social").innerHTML = "Link: " + obj.social
      document.getElementById("title").innerHTML = obj.title || ""

      document.onload = function() {
        let a = document.createElement("a");
        document.body.appendChild(a);
        a.style = "display: none";
        a.href = "data:text/x-vcard;charset=utf8," + escape(card);
        a.download = `${obj.fullname}.vcf`;
        a.click();
        document.body.removeChild(a);
      }
    </script>
</body>
</html>
